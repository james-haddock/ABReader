<!DOCTYPE html>
<html lang="en" style="height: 100%;">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>{{ book_title }}</title>
    <base href="{{ base }}">
    <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
</head>

<body>

<div id="bookContent"></div>

<script>
    $(document).ready(function(){
        let UUID = "{{ UUID }}"; 
        $.ajax({
            url: '/get_content',
            type: 'GET',
            data: {UUID: UUID, action: 'load'}, 
            dataType: 'json',
            success: function(response){
                $('#bookContent').html(response.content);

                $('#bookContent').find("a[href^='#']").on('click', function(event) {
                    event.preventDefault();

                    const targetElement = $(this.getAttribute('href'));
                    if (targetElement.length) {
                        const topPosition = targetElement.offset().top;
                        $('html, body').animate({ scrollTop: topPosition }, 'slow');
                    }
                });
            },
            error: function(error){
                console.log(error);
            }
        });
    });
</script>

</body>

</html>
